# TODO: Migrate to Flask endpoint on Railway - see TODO.md
# Target endpoint: /api/backfill
# Current functionality: Triggers backfill workflows via GitHub Actions API

name = "chinarxiv-backfill-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Environment variables (secrets set via wrangler secret put)
# ADMIN_USERNAME - Basic auth username
# ADMIN_PASSWORD - Basic auth password
# B2_KEY_ID - Backblaze B2 key ID
# B2_APP_KEY - Backblaze B2 application key
# B2_ENDPOINT - S3 endpoint (e.g., https://s3.us-west-004.backblazeb2.com)
# B2_BUCKET - Bucket name
# B2_PREFIX - Optional prefix for all keys

[vars]
B2_BUCKET = "chinaxiv"
B2_PREFIX = ""

# Production environment
[env.production]
name = "chinarxiv-backfill-api"
routes = [
  { pattern = "chinarxiv.org/api/backfill/*", zone_name = "chinarxiv.org" }
]

[env.production.vars]
B2_BUCKET = "chinaxiv"
B2_PREFIX = ""
