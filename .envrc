# .envrc - direnv configuration for chinaxiv-english
# Automatically unset GH_TOKEN to prevent workflow push failures
#
# WHY: When GH_TOKEN is in your shell, git uses it instead of the keyring.
# The keyring token has 'workflow' scope, but GH_TOKEN often doesn't.
# This causes "refusing to allow OAuth App to create or update workflow" errors.

if [ -n "$GH_TOKEN" ]; then
    echo "GH_TOKEN detected in shell - unsetting to use keyring for git"
    unset GH_TOKEN
fi

# Load other env vars from .env (NOT .env.github which has GH_TOKEN for API calls)
dotenv_if_exists .env
