{% extends "base.html" %}
{% block header_breadcrumbs %}
  <div class="header-breadcrumbs">
    <a href="{{ root }}/">Home</a> <span class="sep">&gt;</span> Recent
  </div>
{% endblock %}
{% block content %}
  <div class="page-header">
    <h1>Recent Translations from ChinaXiv</h1>
    <p class="page-description">
      Automatically translated preprints from the Chinese arXiv (ChinaXiv).
      All translations are machine-generated—please verify with the original source.
    </p>
    <p class="paper-count">{{ items|length }} papers translated</p>
  </div>

  <div class="search-block" id="search-section">
    <div class="search-input-group">
      <input id="search-input" placeholder="Search by title, authors, or abstract…" />
      <button class="search-btn">Search</button>
    </div>
    <div class="search-filters">
      <div class="filter-group">
        <label for="category-filter">Category:</label>
        <select id="category-filter">
          <option value="">All Categories</option>
          {% for name, count in categories %}
          <option value="{{ name }}">{{ name }} ({{ count }})</option>
          {% endfor %}
        </select>
      </div>
      <div class="filter-group">
        <label for="date-filter">Date:</label>
        <select id="date-filter">
          <option value="">All Dates</option>
          <option value="7d">Last 7 days</option>
          <option value="30d">Last 30 days</option>
          <option value="90d">Last 90 days</option>
          <option value="1y">Last year</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="sort-order">Sort:</label>
        <select id="sort-order">
          <option value="relevance" selected>Relevance</option>
          <option value="newest">Newest First</option>
          <option value="oldest">Oldest First</option>
        </select>
      </div>
      <div class="filter-group filter-checkbox">
        <label>
          <input type="checkbox" id="figures-filter" />
          Only show papers with figures
        </label>
      </div>
    </div>
    <div id="search-results"></div>
  </div>

  <div id="articles" class="article-list">
    {% for it in items %}
      <article class="paper-card">
        <h3 class="paper-title">
          <a href="{{ root }}/items/{{ it.id }}/" title="Abstract">{{ it.title_en or it.title }}</a>
        </h3>
        <div class="paper-meta-row">
          <span class="paper-authors">{{ ', '.join(it.creators_en or it.creators or ['Unknown']) }}</span>
        </div>
        <div class="paper-meta-row secondary">
          <span class="paper-date">{{ it.date }}</span>
          <span class="paper-id">ChinaXiv:{{ it.id }}</span>
          {% if it.subjects or it.subjects_en %}
            <span class="paper-subjects">
              {% for s in (it.subjects_en or it.subjects)[:3] %}
                <span class="subject-tag">{{ s }}</span>
              {% endfor %}
            </span>
          {% endif %}
          <div class="paper-links">
            <a href="{{ root }}/items/{{ it.id }}/" class="btn-sm">Abstract</a>
            {% if it.pdf_url %}
              <a href="{{ it.pdf_url }}" class="btn-sm">PDF</a>
            {% endif %}
          </div>
        </div>
        <p class="paper-abstract">
          {{ it.abstract_en[:300] }}{% if it.abstract_en and it.abstract_en|length > 300 %}…{% endif %}
        </p>
      </article>
    {% endfor %}
  </div>

  {% if not items %}
    <p style="color: #777; font-style: italic; margin-top: 40px;">No translations available yet.</p>
  {% endif %}
{% endblock %}
